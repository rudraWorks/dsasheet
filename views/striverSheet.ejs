<%- include('./partials/upper.ejs') %>

<style>
    body{
        color: black;
    }
    a{
        text-decoration: none;
        color: black;
    }
    a:hover{
        color: navy;
    }
    .individualQuestions{
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px;
        background-color:white;
        margin: 5px;
        flex-direction: column;
        border: 1px solid black;
        border-radius: 5px;
    }
    .individualQuestions:hover{
        transform: scale(1.04);
        transition-duration: 500ms;
    }
    .individualQuestionsContainer{
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
    }
    .categoryInnerContainer{
        display: flex;
        justify-content: center ;
        align-items: center;
        flex-wrap: wrap;
        padding: 5px;
    }

   
    .categoryContainer{
        border: 1px solid black;
        text-align: center;
        margin-top: 30px;
        width: 99%;
        background-color: #9a9ea7;

    }
    .categoryContainer>h3{
        margin: 10px;
    }
    .doneCheckbox{
        width: 28px;
        height: 28px;
        margin: 5px;
    }
   
    .individualQuestions>a{
        font-size: 23px;
        margin-bottom: 5px;
    }
    .formContainer{
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .formContainer>button{
        margin: 4px;
    }
    .modal{
        color:black
    }

    .topicHeadingAndGauge{
        display: flex;
        align-items: center;
        background-color: #06344a;
        flex-wrap: wrap;
        margin-bottom: 40px;
    }

    .topicHeading{
        font-size: 50px;
        margin-bottom: 20px;
        color:#adad87;
        position: relative;
        top: 10px;
        margin-left: 80px;
    }
    .gauge{
        color: rgb(17 9 84);
        margin-left: 30px;
        font-size: 15px;
        border: 1px solid white;
        padding: 5px;
        font-weight: 100;
        background-color: #dee2e6;
        margin-left: auto;
        margin-right: 20px;
        border-radius: 20px;
    }

    


    .button-74 {
    background-color: white;
    border: 2px solid #422800;
    border-radius: 5px;
    /* box-shadow: #422800 4px 4px 0 0; */
    color: #422800;
    cursor: pointer;
    display: inline-block;
    font-weight: 600;
    font-size: 13px;
    padding: 5px;
    line-height: 15px;
    text-align: center;
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;
    }

    .button-74:hover {
    background-color: #fff;
    }

    .button-74:active {
    box-shadow: #422800 2px 2px 0 0;
    transform: translate(2px, 2px);
    }

    @media (min-width: 768px) {
        .button-74 {
            min-width: 60;
            padding: 5px;
        }
    }

    @media (max-width: 768px) {
        .topicHeadingAndGauge {
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .gauge{
            margin:5px;
        }
        .topicHeading{
            margin:5px;
        }
      
    }

    #striver{
            text-align: center;
            font-size: 50px;
            margin-top: 40px;
        }

        
    


</style>

<div id="striver">< Striver DSA Sheet />
    <br>
    <h3> You have solved <span style="color: red;"><%= totalCompletedQuestions %> </span>questions out of 185. (<%= percentageOfQuestionsDone %>% Completed)</h3>
</div>
<div class="individualQuestionsContainer">j

    <div class="categoryContainer">
        <div class="topicHeadingAndGauge">
                <div class="topicHeading" >Array</div> 
                <div class="gauge" id="arrayGauge"><%= questionsDoneInEachCategory[0] %> % completed</div>
        </div>
        <div class="categoryInnerContainer">
            <% for(let i=0;i<que.length;++i) { %>
                <% if(que[i].cat=='array') { %>
                    <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                        <div class="formContainer">
                            <form class="questionForm">
                                <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                <button class="submitButton" style="display: none;" type="submit">submit</button>
                            
                            </form>
                            <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                            <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                        </div>
                    </div>              
                <% } %>
            <% } %>
        </div>
    </div>

            

            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >LinkedList</div> 
                        <div class="gauge" id="llGauge"><%= questionsDoneInEachCategory[1] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='linkedList') { %>
                            <div class="individualQuestions "  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>

            
            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >LinkedList and Array</div> 
                        <div class="gauge" id="llaaGauge"><%= questionsDoneInEachCategory[2] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='linkedListAndArrays') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>

            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Greedy</div> 
                        <div class="gauge" id="greedyGauge"><%= questionsDoneInEachCategory[3] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='greedy') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>


            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Recursion</div> 
                        <div class="gauge" id="recGauge"><%= questionsDoneInEachCategory[4] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='recursion') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>
            

            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Recursion and Backtracking</div> 
                        <div class="gauge" id="rabGauge"><%= questionsDoneInEachCategory[5] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='recursionAndBacktracking') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>

            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Binary Search</div> 
                        <div class="gauge" id="bsGauge"><%= questionsDoneInEachCategory[6] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='binarySearch') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>

            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Heap</div> 
                        <div class="gauge" id="heapGauge"><%= questionsDoneInEachCategory[8] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='heap') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>

            
            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Stack and Queue</div> 
                        <div class="gauge" id="saqGauge"><%= questionsDoneInEachCategory[7] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='stackAndQueue') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>

            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >String</div> 
                        <div class="gauge" id="stringGauge"><%= questionsDoneInEachCategory[14] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='string') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>


            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Binary Tree</div> 
                        <div class="gauge" id="btGauge"><%= questionsDoneInEachCategory[9] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='binaryTree') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>


            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Binary Search Tree</div> 
                        <div class="gauge" id="bstGauge"><%= questionsDoneInEachCategory[10] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='binarySearchTree') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>


            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Graph</div> 
                        <div class="gauge" id="graphGauge"><%= questionsDoneInEachCategory[11] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='graph') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a target="_blank" href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>
        
        

            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Dynamic Prgrogramming</div> 
                        <div class="gauge" id="dpGauge"><%= questionsDoneInEachCategory[12] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='dp') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a target="_blank" href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>
            


            <div class="categoryContainer">
                <div class="topicHeadingAndGauge">
                        <div class="topicHeading" >Trie</div> 
                        <div class="gauge" id="trieGauge"><%= questionsDoneInEachCategory[13] %>% completed</div>
                </div>
                <div class="categoryInnerContainer">
                    <% for(let i=0;i<que.length;++i) { %>
                        <% if(que[i].cat=='trie') { %>
                            <div class="individualQuestions"  <% if( doneArr.includes( que[i].qid) ) {%> style="background:lightgreen;"  <% } %> > <a href="<%= que[i].url %>"><%= que[i].name %></a>

                                <div class="formContainer">
                                    <form class="questionForm">
                                        <input id="<%= que[i].qid %>" <% if( doneArr.includes( que[i].qid) ) {%> checked  <% } %>  name="checkbox" type="checkbox" class="doneCheckbox">
                                        <button class="submitButton" style="display: none;" type="submit">submit</button>
                                    
                                    </form>
                                    <button  type="button" onclick="showNote(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="notesButton button-74"> Notes</button>
                                    <div <% if( likedQuestionsArr.includes( que[i].qid) ) {%>type='liked'  style="background:tomato;"  <% } %> onclick="like(this)"  <% if(typeof isAuthenticated == 'undefined' || isAuthenticated==false){ %> dir="noAuth"  <%} %>  id="<%= que[i].qid %>" class="likeButton button-74"> Like</div>
                                </div>
                            </div>              
                        <% } %>
                    <% } %>
                </div>
            </div>
</div>

    <!-- Modal -->
    <div class="modal fade" id="notesModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Take a note</h5>
             
            </div>
            <div class="modal-body">
              <form>
                <div class="form-group">
                  <textarea class="form-control"  id="notesTextarea"></textarea>
                </div>
              </form>
            </div>
            <div class="modal-footer">
                    
                <button onclick="saveNote()" type="button" class="btn btn-primary ">Save</button>

            </div>
          </div>
        </div>
      </div>

      

<script>

                    
                    function toastMessage(message){
                        return Toastify({
                                        text:message,
                                        duration: 3000,
                                        // destination: "https://github.com/apvarun/toastify-js",
                                        newWindow: true,
                                        close: true,
                                        gravity: "top", // `top` or `bottom`
                                        position: "center", // `left`, `center` or `right`
                                        stopOnFocus: true, // Prevents dismissing of toast on hover
                                        style: {
                                            background:"linear-gradient(to right, #00b09b, #96c93d)",
                                        },
                                        onClick: function(){} // Callback after click
                                        }).showToast();
                    }
                
                    let form=document.getElementsByClassName('questionForm')
                    for(let i=0;i<form.length;++i)
                        form[i].addEventListener('submit',async(e)=>{
                            e.preventDefault()
                            // alert(e.target.checkbox.checked)
                            console.log(e.target.checkbox.checked)
                            // alert(form[i].childNodes[1].getAttribute('id'))
                            const qid = form[i].childNodes[1].getAttribute('id');
                            const done=e.target.checkbox.checked
                            try{
                                const data = await fetch('/checkQuestion',{
                                    method:"POST",
                                    headers:{"Content-Type":"application/json"},
                                    body:JSON.stringify({qid,done})
                                })
                                
                                const res = await data.json()
                                console.log(res)
                                let message
                                if(done)
                                    message="Congratulations!! You just solved a question."
                                else 
                                    message="Better luck next time!"
                                
                                if(res.error)
                                    message=res.error
                            

                                return toastMessage(message)
                                }
                            catch(e){
                                console.log(e)
                            }
                        })
                    let checkbox = document.getElementsByClassName('doneCheckbox')
                    for(let i=0;i<checkbox.length;++i)
                    {
                        checkbox[i].addEventListener('input',async function(){
                            // checkbox[i].parentNode.parentNode.style.background="lightgreen";
                            // alert(checkbox[i].parentNode.childNodes[3].getAttribute('type'))
                            
                            if(checkbox[i].checked)
                            {
                                checkbox[i].parentNode.parentNode.parentNode.style.background="lightgreen";
                                // console.log('f')
                            }

                            if(!checkbox[i].checked)
                            {
                                checkbox[i].parentNode.parentNode.parentNode.style.background="white";
                                // console.log('f')
                            }
                        checkbox[i].parentNode.childNodes[3].click()
                            
                        

                        })
                    }


                    let notesButton=document.getElementsByClassName('notesButton')
                    for(let i=0;i<notesButton.length;++i)
                    {
                        notesButton[i].addEventListener('click',()=>{

                            // prompt(notesButton[i].getAttribute('id'))
                            // document.getElementById('notesTextarea').value=notesButton[i].getAttribute('id')
                            document.getElementById('notesTextarea').setAttribute('type',notesButton[i].getAttribute('id'))
                            
                            
                            $('#notesModal').modal('toggle')

                        })

                    }

                 
  
                    async function showNote(qid){

                        if(qid.getAttribute('dir')=='noAuth')
                        {
                            $('#notesModal').modal('hide')
                            return toastMessage('Please login to view your note!')
                        }
                        try{
                                const data = await fetch('/getNotes',{
                                    method:"POST",
                                    headers:{"Content-Type":"application/json"},
                                    body:JSON.stringify({qid:qid.getAttribute('id')})
                                })

                                const res = await data.json()
                                console.log(res)
                                document.getElementById('notesTextarea').value=res.notes
                                // $('#notesModal').modal('hide');
                        }   
                        catch(e)
                        {
                            alert(e)
                        }
                                
                    }
                    
                async function saveNote(){
                        let noteValue = document.getElementById('notesTextarea')
                        // alert(noteValue.value+" , "+noteValue.getAttribute('type'))
                        $('#notesModal').modal('hide')

                        try{
                            let noteToBeSaved=noteValue.value 
                            let qid=noteValue.getAttribute('type')

                            let data = await fetch('/saveNote',{
                                method:"POST",
                                body:JSON.stringify({qid,noteToBeSaved}),
                                headers:{"Content-Type":"application/json"}
                            })

                            let res = await data.json()

                            if(res.error)
                            return toastMessage(res.error)
                            toastMessage("Note Saved")
                            console.log(res)
                        }
                        catch(e){
                            alert(e)
                        }
                    }


                    async function like(qid){

                        if(qid.getAttribute('dir')=='noAuth')
                        return toastMessage('Please login to like this question!')

                        let status = qid.getAttribute('type')
                        
                        if(status=='liked')
                        {
                            qid.style.background="white"
                            qid.setAttribute('type','notLiked')
                            status='notLiked'
                        }
                        else  
                        {
                            qid.style.background="tomato"
                            qid.setAttribute('type','liked')
                            status='liked'
                        }
                        try{
                                qid=qid.getAttribute('id')

                                const data = await fetch('/likeQuestion',{
                                    method:"POST",
                                    body:JSON.stringify({qid,status}),
                                    headers:{"Content-Type":"application/json"}
                                })

                                const res = await data.json()
                                if(res.message)
                                toastMessage(res.message)
                                console.log(res)
                        }
                        catch(e)
                        {
                            alert(e)
                        }
                    }



              
</script>
    

    
</div>
<br>
<br>
<%- include('./partials/lower.ejs') %>


