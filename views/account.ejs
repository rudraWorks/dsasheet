<%- include('./partials/upper.ejs') %>
<style>
    .accountData{
        display: flex;
        margin-right: 30px;
        flex-direction: column;
        margin-left: 30px;
    }
    .accountData>div{
        display: flex;
        align-items: center;
        border: 1px dashed black;
        background-color: aliceblue;
        margin: 5px;
        padding-left: 10px;
        height: 40px;
    }
    .accountData>div>span{
        font-weight: 600;
        margin-right: 20px;
    }
    .accountData>div>div{
      margin-left: auto;
      margin-right: 10px;
    }
    .accountData>div>div>input{
        text-align: center;
    }
</style>
    <h1 style="text-align: center; margin: 40px;">Account Data</h1>
    <div class="accountData">
        <div><span>Name:</span><%= name %> </div>
        <div><span>Email:</span><%= email %></div>
        <div><span>Password:</span><%= password%></div>
        <div><span>Country:</span><%= country %> <div><input id="country" value="<%= country %>"></div> </div>
        <div><span>Company:</span><%= company %> <div><input id="company" value="<%= company %>"></div> </div>
        <div><span>College:</span><%= college %> <div><input id="college" value="<%= college %>"></div> </div>
        <div><span>Phone:</span><%= phone %> <div><input id="phone" value="<%= phone %>"></div> </div>
    </div>
    <br>
    <center>
    <button onclick="save()" class="btn btn-primary">Save</button>
    </center>
    <br>

    <script>
        function toastMessage(message){
                        return Toastify({
                                        text:message,
                                        duration: 3000,
                                        // destination: "https://github.com/apvarun/toastify-js",
                                        newWindow: true,
                                        close: true,
                                        gravity: "top", // `top` or `bottom`
                                        position: "center", // `left`, `center` or `right`
                                        stopOnFocus: true, // Prevents dismissing of toast on hover
                                        style: {
                                            background:"linear-gradient(to right, #00b09b, #96c93d)",
                                        },
                                        onClick: function(){} // Callback after click
                                        }).showToast();
                    }
        async function save()
        {
            let country=document.getElementById('country').value.trim()
            let company=document.getElementById('company').value.trim()
            let college=document.getElementById('college').value.trim()
            let phone=document.getElementById('phone').value.trim()

            try{

                let data=await fetch('saveAcademicData',{
                    method:'POST',
                    body:JSON.stringify({country,company,college,phone}),
                    headers:{"Content-Type":"application/json"}
                })

                let res=await data.json()
                if(res.error)
                return toastMessage(res.error)
                else return toastMessage(res.success)
            }
            catch(e)
            {
               alert(e)

            }
        }
    </script>
<%- include('./partials/lower.ejs') %>